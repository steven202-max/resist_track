{% extends 'amr_core/base.html' %}

{% block title %}Home - AMR Tracking System{% endblock %}
{% block page_title %}AMR Tracking System{% endblock %}

{% block extra_css %}
<style>
    /* Additional home-specific styling */
    .hero { padding: 4rem 2rem; border-radius: 16px; }
    .feature-icon { width: 84px; height: 84px; border-radius: 14px; display: inline-flex; align-items:center; justify-content:center; }
    .cta-large { padding: 0.9rem 2rem; font-size:1.05rem; }
    @media (min-width: 992px) {
        .hero { padding: 6rem 4rem; }
    }
</style>
{% endblock %}

{% block content %}
{# Use a body class to hide the sidebar for a clean landing page #}
<script>document.documentElement.classList.add('no-sidebar'); document.body.classList.add('no-sidebar');</script>

<!-- Modern Hero -->
<div class="row mb-5">
    <div class="col-lg-10 mx-auto">
        <div class="card bg-hospital-primary text-white hero">
            <div class="card-body text-center">
                <h1 class="display-4 fw-bold mb-3">
                    <i class="bi bi-shield-check"></i> AMR Tracking System
                </h1>
                <p class="lead mb-4 px-lg-5">
                    Intelligent antimicrobial resistance monitoring and smart prescribing tools for clinicians â€” secure, evidence-driven, and easy to use.
                </p>
                <div class="d-flex gap-3 justify-content-center flex-wrap">
                    {% if not user.is_authenticated %}
                        <a href="{% url 'doctor_login' %}" class="btn btn-light btn-lg cta-large">
                            <i class="bi bi-box-arrow-in-right me-2"></i> Doctor Login
                        </a>
                        <a href="{% url 'doctor_register' %}" class="btn btn-outline-light btn-lg cta-large">
                            <i class="bi bi-person-plus me-2"></i> Register
                        </a>
                    {% else %}
                        <a href="{% url 'doctor_dashboard' %}" class="btn btn-light btn-lg cta-large">
                            <i class="bi bi-speedometer2 me-2"></i> Go to Dashboard
                        </a>
                        <a href="{% url 'prescribe_antibiotic' %}" class="btn btn-outline-light btn-lg cta-large">
                            <i class="bi bi-prescription me-2"></i> Prescribe Antibiotic
                        </a>
                    {% endif %}
                    <a href="{% url 'patient_feedback' %}" class="btn btn-outline-light btn-lg cta-large">
                        <i class="bi bi-chat-dots me-2"></i> Patient Feedback
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Key Stats (centered) -->
<div class="row mb-5">
    <div class="col-lg-10 mx-auto">
        <div class="d-flex gap-4 flex-column flex-md-row justify-content-between">
            <div class="stats-card text-center flex-fill">
                <div class="mb-2"><i class="bi bi-people fs-2 text-hospital-primary"></i></div>
                <h3 class="mb-0">{{ total_patients }}</h3>
                <p class="text-muted small">Total Patients</p>
            </div>
            <div class="stats-card text-center flex-fill">
                <div class="mb-2"><i class="bi bi-capsule fs-2 text-success"></i></div>
                <h3 class="mb-0">{{ total_antibiotics }}</h3>
                <p class="text-muted small">Antibiotics</p>
            </div>
            <div class="stats-card text-center flex-fill">
                <div class="mb-2"><i class="bi bi-prescription fs-2 text-warning"></i></div>
                <h3 class="mb-0">{{ active_prescriptions }}</h3>
                <p class="text-muted small">Active Prescriptions</p>
            </div>
            <div class="stats-card text-center flex-fill">
                <div class="mb-2"><i class="bi bi-exclamation-triangle fs-2 text-danger"></i></div>
                <h3 class="mb-0">{{ resistance_records }}</h3>
                <p class="text-muted small">Resistance Records</p>
            </div>
        </div>
    </div>
</div>

<!-- Features Grid -->
<div class="row mb-5">
    <div class="col-lg-10 mx-auto">
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <div class="feature-icon bg-hospital-danger mb-3">
                            <i class="bi bi-shield-exclamation text-white fs-2"></i>
                        </div>
                        <h5>Real-time Resistance Detection</h5>
                        <p class="text-muted small">Checks patient resistance history and alerts clinicians during prescribing.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <div class="feature-icon bg-hospital-success mb-3">
                            <i class="bi bi-arrow-repeat text-white fs-2"></i>
                        </div>
                        <h5>Smart Alternatives</h5>
                        <p class="text-muted small">Suggests alternatives based on bacteria targeting and patient history.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <div class="feature-icon bg-hospital-primary mb-3">
                            <i class="bi bi-graph-up text-white fs-2"></i>
                        </div>
                        <h5>Outcome Analytics</h5>
                        <p class="text-muted small">Monitor effectiveness using patient feedback and interactive reports.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- CTA strip -->
<div class="row mb-5">
    <div class="col-lg-10 mx-auto">
        <div class="card bg-white p-4 text-center">
            <h4 class="mb-2">Ready to improve prescribing outcomes?</h4>
            <p class="text-muted mb-3">Create a free demo account and explore the dashboard, prescribing workflow, and reports.</p>
            <div class="d-flex justify-content-center gap-3">
                <a href="{% url 'doctor_register' %}" class="btn btn-hospital-primary">Create Demo Account</a>
                <a href="{% url 'patient_feedback' %}" class="btn btn-outline-hospital-primary">Give Feedback (Patient)</a>
            </div>
        </div>
    </div>
</div>

{% endblock %}